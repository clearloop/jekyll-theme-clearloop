# 分片

GUN 通常认为分片不是一件好事。

### 数据库即服务
    
比如Compose，Heroku的Postgres，Dropbox Datastore，Firebase，Parse等。

### 在云中部署数据库

这是您在AWS EC2，Google Cloud Engine，Microsoft Azure，Digital Ocean等上启用一个框并安装和维护自己的数据库（例如MySQL，MongoDB，RethinkDB等）的地方。

### 在你自己的物理机器上

虽然与（2）类似，但您最终拥有部署的硬件 - 在资源不足的情况下，您必须物理添加硬盘驱动器。

## 优点

(1) 的优点是（2) 和(3) 可能很难并且困难，这就是DevOps和SysAdmins是关键角色的原因。作为服务的数据库将您的这些角色外包给您，而当您超越免费增值级，网络延迟较慢以及不拥有您的数据时，这些角色通常会非常昂贵。

(3) 的优点是您拥有您的数据，这对于安全或监管问题可能是必需的。然而，它遭受了严重的痛苦，前期成本和人工干预以及跨学科的广泛知识。

部署到云计算是一个中间环节，您需要付费将外部工作外包出去，并尽可能多地配置尽可能多的虚拟机。重要的区别是事物是虚拟化的，无论是计算还是存储 - 这意味着云提供商已经为您抽取了这些资源的缩放比例。


## 观察 

传统上，数据库服务器必须进行配置，充当一个或多个磁盘上数据的交易者。准确地说，这个交易者是一个用于存储结构化数据的抽象和虚拟化层。这样应用程序开发人员不必担心存储位置。但是云提供商已经对虚拟化存储进行了虚拟化，比如S3或者GCS或者Azure Storage，它们是“无限”的硬盘。这并不是说固定大小的分配磁盘不可用，它们是 - 并且速度更快，但其大小的限制受到底层虚拟化的任意限制。

这些任意约束是数据库和云试图去除的东西。然而，由于有这样一个普遍的期望，事情是有限的，人们不断诉诸有限的驱动器默认情况下。你如何解决这些违约问题？通过将数据分块成微小的固定大小，并将其存储并复制到不断增加的专用于特定“分片”键或范围的硬盘驱动器上。这是分割是必要的，比如当你运行自己的物理机器时。

## 误解

具有讽刺意味的是，尽管云存储的可扩展性，人们仍然在这些提供商的有限驱动器上部署和分割数据库。这导致分片仍然是一种常见做法，但具有以下两个不利的缺点，只有一个优点：

+ A.您支付计算时间以及总分配的存储成本，而不是使用存储。
+ B.您仍然需要devops和系统管理员专业知识来配置和协调分片键和框。
+ C.具有不被锁定到任何专有虚拟化系统的优势。

选项 (C) 本身是值得的，但这不是突然开始在云中分片的理由，这完全是因为云计算的底层配置是专有的，因此完全从云端迁移到 (3)。
所以呢？也许你正在使用云来优化成本，在这种情况下 (A) 反正会花费更多。因此，无论你如何接近它，试图在云中碎片是一种误解，应该避免。

## 结论

因此，GUN不建议分片，因为它假定大多数用户将在云中进行部署。此外，这为开发人员消除了一个巨大的痛点 - 让GUN根据动态负载而不是存储限制自动缓存。这使得最终用户的工作变得更加快速，而且您的个人工作量也更少。

最后，如果你想在你自己的机器上使用GUN (3)，那么你仍然可以通过优先权和无期限选项 (文件来) 进行分割。因此，GUN在物理上必要时可以碎片化，但强烈建议在其他地方避免GUN，以降低成本和复杂性。
